/**
 * JG - JustGiving API SDK
 * @version v2.0.0
 * @link https://api.justgiving.com/
 * @license MIT
 */
!function(t,e){if("function"==typeof define&&define.amd)define("JustGiving",["exports"],e);else if("undefined"!=typeof exports)e(exports);else{var n={exports:{}};e(n.exports),t.JustGiving=n.exports}}(this,function(t){"use strict";var e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(n,o,r){if(e(this,t),"string"!=typeof n)throw new Error("URL is required");this._url=n,this._appId=o,this._accessToken=r,this._version="v1"}return t.prototype._getOptions=function(t,e){var n={method:e||"GET",headers:new Headers({"x-app-id":this._appId,Accept:"application/json"})};return this._accessToken&&n.headers.append("Authorization",this._accessToken),(t||"POST"===e)&&(n.method=e||"POST",n.body=JSON.stringify(t),n.headers.append("Content-Type","application/json")),n},t.prototype._handleResponse=function(t){if(t.status>=400){var e=t.headers.get("content-type");if(e&&0===e.indexOf("application/json"))return t.json().then(function(e){if(e[0])throw new Error(""+t.status+" "+t.statusText+". "+e[0].id+" : "+e[0].desc)});throw new Error(""+t.status+" "+t.statusText)}return t.json()},t.prototype._fetch=function(t,e,n){return fetch(""+this._url+"/"+this._version+"/"+t,this._getOptions(e,n)).then(this._handleResponse)},t.prototype.validateAccount=function(t,e){return this._fetch("account/validate",{email:t,password:e})},t.prototype.getFundraisingPagesForUser=function(t,e){var n=e?"?charityId="+e:"";return this._fetch("account/"+t+"/pages"+n)},t.prototype.getDonationsForUser=function(t,e,n){var o=n?"charityId="+n+"&":"",r=t?"pageSize="+t+"&":"",i=e?"pageNum="+e+"&":"";return this._fetch("account/donations?"+r+i+o)},t.prototype.checkAccountAvailability=function(t){return this._fetch("account/"+encodeURIComponent(t))},t.prototype.getContentFeed=function(){return this._fetch("account/feed")},t.prototype.getAccountRating=function(t,e){var n=t?"pageSize="+t+"&":"",o=e?"page="+e+"&":"";return this._fetch("account/rating?"+n+o)},t.prototype.getAccount=function(){return this._fetch("account")},t.prototype.getInterests=function(){return this._fetch("account/interest")},t.prototype.addInterest=function(t){return this._fetch("account/interest",{interest:t})},t.prototype.replaceInterests=function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return this._fetch("account/interest",e,"PUT")},t.prototype.requestPasswordReminder=function(t){return this._fetch("account/"+t+"/requestpasswordreminder")},t.prototype.changePassword=function(t,e,n){if(!t||!e||!n)throw new Error("All parameters are required");return this._fetch("account/changePassword?emailaddress="+t+"&currentpassword="+encodeURIComponent(e)+"&newpassword="+encodeURIComponent(n),void 0,"POST")},t.prototype.getCountries=function(){return this._fetch("countries")},t.prototype.getCurrencies=function(){return this._fetch("fundraising/currencies")},t.prototype.getCharityCategories=function(){return this._fetch("charity/categories")},t.prototype.getCharity=function(t){return this._fetch("charity/"+t)},t.prototype.getEventsByCharity=function(t,e,n){var o=e?"pageSize="+e+"&":"",r=n?"pageNum="+n+"&":"";return this._fetch("charity/"+t+"/events?"+o+r)},t.prototype.getDonation=function(t){return this._fetch("donation/"+t)},t.prototype.getDonationByReference=function(t){return this._fetch("donation/ref/"+encodeURIComponent(t))},t.prototype.getDonationStatus=function(t){return this._fetch("donation/"+t+"/status")},t.prototype.getEvent=function(t){return this._fetch("event/"+t)},t.prototype.getEventPages=function(t,e,n){var o=e?"pageSize="+e+"&":"",r=n?"page="+n+"&":"";return this._fetch("event/"+t+"/pages?"+o+r)},t.prototype.registerEvent=function(t){return this._fetch("event",t)},t.prototype.getFundraisingPages=function(){return this._fetch("fundraising/pages")},t.prototype.getFundraisingPage=function(t){return this._fetch("fundraising/pages/"+encodeURIComponent(t))},t.prototype.suggestPageShortName=function(t){return this._fetch("fundraising/pages/suggest?preferredName="+encodeURIComponent(t))},t.prototype.onesearch=function(t,e,n,o,r,i){return this._fetch("onesearch?q="+encodeURIComponent(t)+"&g="+encodeURIComponent(e)+"&i="+encodeURIComponent(n)+"&limit="+o+"&offset="+r+"&country="+i)},t.prototype.getProject=function(t){return this._fetch("project/global/"+t)},t.prototype.searchCharities=function(t,e,n,o,r){var i=r?"pageSize="+r+"&":"",c=o?"page="+o+"&":"",s=e.length?e.map(function(t){return"charityId="+t+"&"}).join():"charityId="+e+"&",a=n.length?n.map(function(t){return"categoryId="+t+"&"}).join():"categoryId="+n+"&";return this._fetch("charity/search?q="+encodeURIComponent(t)+"&"+a+s+i+c)},t.prototype.searchEvents=function(t,e,n){var o=n?"pageSize="+n+"&":"",r=e?"page="+e+"&":"";return this._fetch("event/search?q="+encodeURIComponent(t)+"&"+o+r)},t.prototype.getTeam=function(t){return this._fetch("team/"+encodeURIComponent(t))},t.prototype.checkTeamExists=function(t){return this._fetch("team/"+encodeURIComponent(t),void 0,"HEAD")},t.prototype.createOrUpdateTeam=function(t,e){return this._fetch("team/"+encodeURIComponent(t),e,"PUT")},t.prototype.joinTeam=function(t,e){return this._fetch("team/join/"+encodeURIComponent(t),{pageShortName:e},"PUT")},t}();t.ApiClient=n});