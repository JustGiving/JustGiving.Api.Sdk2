{"version":3,"sources":["JG-edge.js"],"names":[],"mappings":"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","file":"JG-edge.js","sourcesContent":["class JG {\r\n  constructor(url, appId, accessToken) {\r\n    if (typeof url !== 'string') throw new Error('URL is required');\r\n    this._url = url;\r\n    this._appId = appId;\r\n    this._accessToken = accessToken;\r\n    this._version = 'v1';\r\n  }\r\n\r\n  _getOptions(payload, method) {\r\n    const options = {method: method || 'GET', headers: new Headers({'x-app-id': this._appId, Accept: 'application/json'})};\r\n    if (this._accessToken) {\r\n      options.headers.append('Authorization', this._accessToken);\r\n    }\r\n    if (payload || method === 'POST') {\r\n      options.method = method || 'POST';\r\n      options.body = JSON.stringify(payload);\r\n      options.headers.append('Content-Type', 'application/json');\r\n    }\r\n    return options;\r\n  };\r\n\r\n  _handleResponse(response) {\r\n    if (response.status >= 400) {\r\n      const contentType = response.headers.get('content-type');\r\n\r\n      if(contentType && contentType.indexOf('application/json') === 0) {\r\n        return response.json().then(json => {\r\n          if (json[0]) {\r\n            throw new Error(`${response.status} ${response.statusText}. ${json[0].id} : ${json[0].desc}`);\r\n          }\r\n        });\r\n      }\r\n\r\n      throw new Error(`${response.status} ${response.statusText}`);\r\n    }\r\n\r\n    return response.json();\r\n  };\r\n\r\n  _fetch(resource, payload, method) {\r\n    return fetch(`${this._url}/${this._version}/${resource}`, this._getOptions(payload, method)).then(this._handleResponse);\r\n  }\r\n\r\n  // Account resource\r\n  validateAccount(email, password) {\r\n    return this._fetch('account/validate', {email: email, password: password});\r\n  }\r\n\r\n  getFundraisingPagesForUser(email, charityId) {\r\n    const charityRestriction = (charityId?`?charityId=${charityId}`:'');\r\n    return this._fetch(`account/${email}/pages${charityRestriction}`);\r\n  }\r\n\r\n  getDonationsForUser(pageSize, pageNum, charityId) {\r\n    const charityRestriction = (charityId?`charityId=${charityId}&`:'');\r\n    const pageSizeRestriction = (pageSize?`pageSize=${pageSize}&`:'');\r\n    const pageNumRestriction = (pageNum?`pageNum=${pageNum}&`:'');\r\n    return this._fetch(`account/donations?${pageSizeRestriction}${pageNumRestriction}${charityRestriction}`);\r\n  }\r\n\r\n  checkAccountAvailability(email) {\r\n    return this._fetch(`account/${encodeURIComponent(email)}`);\r\n  }\r\n\r\n  getContentFeed() {\r\n    return this._fetch('account/feed');\r\n  }\r\n\r\n  getAccountRating(pageSize, pageNum) {\r\n    const pageSizeRestriction = (pageSize?`pageSize=${pageSize}&`:'');\r\n    const pageNumRestriction = (pageNum?`page=${pageNum}&`:'');\r\n    return this._fetch(`account/rating?${pageSizeRestriction}${pageNumRestriction}`);\r\n  }\r\n\r\n  getAccount() {\r\n    return this._fetch('account');\r\n  };\r\n\r\n  getInterests() {\r\n    return this._fetch('account/interest');\r\n  }\r\n\r\n  addInterest(interest) {\r\n    return this._fetch('account/interest', {interest: interest});\r\n  }\r\n\r\n  replaceInterests(...interests) {\r\n    return this._fetch('account/interest', interests, 'PUT');\r\n  }\r\n\r\n  requestPasswordReminder(email) {\r\n    return this._fetch(`account/${email}/requestpasswordreminder`);\r\n  }\r\n\r\n  changePassword(email, currentPassword, newPassword) {\r\n    if (!email || !currentPassword || !newPassword) throw new Error('All parameters are required');\r\n    return this._fetch(`account/changePassword?emailaddress=${email}&currentpassword=${encodeURIComponent(currentPassword)}&newpassword=${encodeURIComponent(newPassword)}`, undefined, 'POST');\r\n  }\r\n\r\n  // Countries resource\r\n  getCountries() {\r\n    return this._fetch('countries');\r\n  };\r\n\r\n  // Currency resource\r\n  getCurrencies() {\r\n    return this._fetch('fundraising/currencies');\r\n  };\r\n\r\n  // Charity resource\r\n  getCharityCategories() {\r\n    return this._fetch('charity/categories');\r\n  };\r\n\r\n  getCharity(charityId) {\r\n    return this._fetch(`charity/${charityId}`);\r\n  }\r\n\r\n  getEventsByCharity(charityId, pageSize, pageNum) {\r\n    const pageSizeRestriction = (pageSize?`pageSize=${pageSize}&`:'');\r\n    const pageNumRestriction = (pageNum?`pageNum=${pageNum}&`:'');\r\n\r\n    return this._fetch(`charity/${charityId}/events?${pageSizeRestriction}${pageNumRestriction}`);\r\n  }\r\n\r\n  // Donation resource\r\n  getDonation(donationId) {\r\n    return this._fetch(`donation/${donationId}`);\r\n  }\r\n\r\n  getDonationByReference(thirdPartyReference) {\r\n    return this._fetch(`donation/ref/${encodeURIComponent(thirdPartyReference)}`);\r\n  }\r\n\r\n  getDonationStatus(donationId) {\r\n    return this._fetch(`donation/${donationId}/status`);\r\n  }\r\n\r\n  // Event resource\r\n  getEvent(eventId) {\r\n    return this._fetch(`event/${eventId}`);\r\n  }\r\n\r\n  getEventPages(eventId, pageSize, pageNum) {\r\n    const pageSizeRestriction = (pageSize?`pageSize=${pageSize}&`:'');\r\n    const pageNumRestriction = (pageNum?`page=${pageNum}&`:'');\r\n\r\n    return this._fetch(`event/${eventId}/pages?${pageSizeRestriction}${pageNumRestriction}`);\r\n  }\r\n\r\n  registerEvent(eventDetails) {\r\n    return this._fetch('event', eventDetails);\r\n  }\r\n\r\n  // Fundraising resource\r\n  getFundraisingPages() {\r\n    return this._fetch('fundraising/pages');\r\n  }\r\n\r\n  getFundraisingPage(pageShortName) {\r\n    return this._fetch(`fundraising/pages/${encodeURIComponent(pageShortName)}`);\r\n  }\r\n\r\n  suggestPageShortName(preferredName) {\r\n    return this._fetch(`fundraising/pages/suggest?preferredName=${encodeURIComponent(preferredName)}`);\r\n  }\r\n\r\n  // OneSearch resource\r\n  onesearch(searchTerm, grouping, index, pageSize, pageNum, country) {\r\n    return this._fetch(`onesearch?q=${encodeURIComponent(searchTerm)}&g=${encodeURIComponent(grouping)}&i=${encodeURIComponent(index)}&limit=${pageSize}&offset=${pageNum}&country=${country}`);\r\n  }\r\n\r\n  // Project resource\r\n  getProject(projectId) {\r\n    return this._fetch(`project/global/${projectId}`);\r\n  }\r\n\r\n  // Search resource\r\n  searchCharities(searchTerm, charityId, categoryId, pageNum, pageSize) {\r\n    const pageSizeRestriction = (pageSize?`pageSize=${pageSize}&`:'');\r\n    const pageNumRestriction = (pageNum?`page=${pageNum}&`:'');\r\n    const charityIdRestriction = charityId.length?charityId.map(id => `charityId=${id}&`).join():`charityId=${charityId}&`;\r\n    const categoryIdRestriction = categoryId.length?categoryId.map(id => `categoryId=${id}&`).join():`categoryId=${categoryId}&`;\r\n    return this._fetch(`charity/search?q=${encodeURIComponent(searchTerm)}&${categoryIdRestriction}${charityIdRestriction}${pageSizeRestriction}${pageNumRestriction}`);\r\n  }\r\n\r\n  searchEvents(searchTerm, pageNum, pageSize) {\r\n    const pageSizeRestriction = (pageSize?`pageSize=${pageSize}&`:'');\r\n    const pageNumRestriction = (pageNum?`page=${pageNum}&`:'');\r\n    return this._fetch(`event/search?q=${encodeURIComponent(searchTerm)}&${pageSizeRestriction}${pageNumRestriction}`);\r\n  }\r\n\r\n  // Team resource\r\n  getTeam(shortName) {\r\n    return this._fetch(`team/${encodeURIComponent(shortName)}`);\r\n  }\r\n\r\n  checkTeamExists(shortName) {\r\n    return this._fetch(`team/${encodeURIComponent(shortName)}`, undefined, 'HEAD');\r\n  }\r\n\r\n  createOrUpdateTeam(shortName, details) {\r\n    return this._fetch(`team/${encodeURIComponent(shortName)}`, details, 'PUT');\r\n  }\r\n\r\n  joinTeam(teamShortName, pageShortName) {\r\n    return this._fetch(`team/join/${encodeURIComponent(teamShortName)}`, {pageShortName: pageShortName}, 'PUT');\r\n  }\r\n}\r\n"],"sourceRoot":"/source/"}