/**
 * JG - JustGiving API SDK
 * @version v2.0.0
 * @link https://api.justgiving.com/
 * @license WTFPL
 */
"use strict";var _classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),JG=function(){function e(t,n,r){if(_classCallCheck(this,e),"string"!=typeof t)throw new Error("URL is required");this._url=t,this._appId=n,this._accessToken=r,this._version="v1"}return _createClass(e,[{key:"_getOptions",value:function(e,t){var n={method:t||"GET",headers:new Headers({"x-app-id":this._appId,Accept:"application/json"})};return this._accessToken&&n.headers.append("Authorization",this._accessToken),(e||"POST"===t)&&(n.method=t||"POST",n.body=JSON.stringify(e),n.headers.append("Content-Type","application/json")),n}},{key:"_handleResponse",value:function(e){if(e.status>=400){var t=e.headers.get("content-type");if(t&&0===t.indexOf("application/json"))return e.json().then(function(t){if(t[0])throw new Error(""+e.status+" "+e.statusText+". "+t[0].id+" : "+t[0].desc)});throw new Error(""+e.status+" "+e.statusText)}return e.json()}},{key:"_fetch",value:function(e,t,n){return fetch(""+this._url+"/"+this._version+"/"+e,this._getOptions(t,n)).then(this._handleResponse)}},{key:"validateAccount",value:function(e,t){return this._fetch("account/validate",{email:e,password:t})}},{key:"getFundraisingPagesForUser",value:function(e,t){var n=t?"?charityId="+t:"";return this._fetch("account/"+e+"/pages"+n)}},{key:"getDonationsForUser",value:function(e,t,n){var r=n?"charityId="+n+"&":"",a=e?"pageSize="+e+"&":"",i=t?"pageNum="+t+"&":"";return this._fetch("account/donations?"+a+i+r)}},{key:"checkAccountAvailability",value:function(e){return this._fetch("account/"+encodeURIComponent(e))}},{key:"getContentFeed",value:function(){return this._fetch("account/feed")}},{key:"getAccountRating",value:function(e,t){var n=e?"pageSize="+e+"&":"",r=t?"page="+t+"&":"";return this._fetch("account/rating?"+n+r)}},{key:"getAccount",value:function(){return this._fetch("account")}},{key:"getInterests",value:function(){return this._fetch("account/interest")}},{key:"addInterest",value:function(e){return this._fetch("account/interest",{interest:e})}},{key:"replaceInterests",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return this._fetch("account/interest",t,"PUT")}},{key:"requestPasswordReminder",value:function(e){return this._fetch("account/"+e+"/requestpasswordreminder")}},{key:"changePassword",value:function(e,t,n){if(!e||!t||!n)throw new Error("All parameters are required");return this._fetch("account/changePassword?emailaddress="+e+"&currentpassword="+encodeURIComponent(t)+"&newpassword="+encodeURIComponent(n),void 0,"POST")}},{key:"getCountries",value:function(){return this._fetch("countries")}},{key:"getCurrencies",value:function(){return this._fetch("fundraising/currencies")}},{key:"getCharityCategories",value:function(){return this._fetch("charity/categories")}},{key:"getCharity",value:function(e){return this._fetch("charity/"+e)}},{key:"getEventsByCharity",value:function(e,t,n){var r=t?"pageSize="+t+"&":"",a=n?"pageNum="+n+"&":"";return this._fetch("charity/"+e+"/events?"+r+a)}},{key:"getDonation",value:function(e){return this._fetch("donation/"+e)}},{key:"getDonationByReference",value:function(e){return this._fetch("donation/ref/"+encodeURIComponent(e))}},{key:"getDonationStatus",value:function(e){return this._fetch("donation/"+e+"/status")}},{key:"getEvent",value:function(e){return this._fetch("event/"+e)}},{key:"getEventPages",value:function(e,t,n){var r=t?"pageSize="+t+"&":"",a=n?"page="+n+"&":"";return this._fetch("event/"+e+"/pages?"+r+a)}},{key:"registerEvent",value:function(e){return this._fetch("event",e)}},{key:"getFundraisingPages",value:function(){return this._fetch("fundraising/pages")}},{key:"getFundraisingPage",value:function(e){return this._fetch("fundraising/pages/"+encodeURIComponent(e))}},{key:"suggestPageShortName",value:function(e){return this._fetch("fundraising/pages/suggest?preferredName="+encodeURIComponent(e))}},{key:"onesearch",value:function(e,t,n,r,a,i){return this._fetch("onesearch?q="+encodeURIComponent(e)+"&g="+encodeURIComponent(t)+"&i="+encodeURIComponent(n)+"&limit="+r+"&offset="+a+"&country="+i)}},{key:"getProject",value:function(e){return this._fetch("project/global/"+e)}},{key:"searchCharities",value:function(e,t,n,r,a){var i=a?"pageSize="+a+"&":"",o=r?"page="+r+"&":"",c=t.length?t.map(function(e){return"charityId="+e+"&"}).join():"charityId="+t+"&",u=n.length?n.map(function(e){return"categoryId="+e+"&"}).join():"categoryId="+n+"&";return this._fetch("charity/search?q="+encodeURIComponent(e)+"&"+u+c+i+o)}},{key:"searchEvents",value:function(e,t,n){var r=n?"pageSize="+n+"&":"",a=t?"page="+t+"&":"";return this._fetch("event/search?q="+encodeURIComponent(e)+"&"+r+a)}},{key:"getTeam",value:function(e){return this._fetch("team/"+encodeURIComponent(e))}},{key:"checkTeamExists",value:function(e){return this._fetch("team/"+encodeURIComponent(e),void 0,"HEAD")}},{key:"createOrUpdateTeam",value:function(e,t){return this._fetch("team/"+encodeURIComponent(e),t,"PUT")}},{key:"joinTeam",value:function(e,t){return this._fetch("team/join/"+encodeURIComponent(e),{pageShortName:t},"PUT")}}]),e}();